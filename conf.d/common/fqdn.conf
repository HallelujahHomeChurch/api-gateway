# ============================================================================
# Backend Service Endpoints (override via deployment template if needed)
# ============================================================================
# 這些變數提供 proxy_pass 的目標基底 URL，方便在不同環境覆寫
# 根據不同的 host 設置不同的容器應用名稱
# 
# Note: $env_suffix is defined in nginx.conf.tmpl using map directive
# - www.alive.org.tw -> "" (production, no suffix)
# - www-test.alive.org.tw -> "-test" (test environment)
# ============================================================================

# Dapr sidecar base URL (can be overridden via environment variable)
set $dapr_base http://127.0.0.1:3500;

# Bible API service (Dapr service invocation base)
# Format: http://127.0.0.1:3500/v1.0/invoke/{app-name}/method
set $bible_api_app "bible-api${env_suffix}";
set $bible_api_base $dapr_base/v1.0/invoke/$bible_api_app/method;

# Search API service (Dapr service invocation base)
set $search_api_app "search-api${env_suffix}";
set $search_api_base $dapr_base/v1.0/invoke/$search_api_app/method;

# Alive App service (default fallback)
set $alive_app_app "alive-app${env_suffix}";
set $alive_app_base $dapr_base/v1.0/invoke/$alive_app_app/method;

